2018-10-20 00:02:50 =ERROR REPORT====
** Generic server chat_manager terminating 
** Last message in was {add_room,<<"aaa">>}
** When Server state == {state,[],[]}
** Reason for termination == 
** {{badmatch,{error,{{'EXIT',{badarg,[{erlang,whereis,[<<"aaa">>],[]},{gen,where,1,[{file,"gen.erl"},{line,299}]},{gen,start,6,[{file,"gen.erl"},{line,75}]},{supervisor,do_start_child,2,[{file,"supervisor.erl"},{line,365}]},{supervisor,handle_start_child,2,[{file,"supervisor.erl"},{line,724}]},{supervisor,handle_call,3,[{file,"supervisor.erl"},{line,422}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]}]}},{child,undefined,<<"aaa">>,{chat_room,start_link,[<<"aaa">>]},temporary,5000,worker,[chat_room]}}}},[{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,41}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 00:02:50 =CRASH REPORT====
  crasher:
    initial call: chat_manager:init/1
    pid: <0.109.0>
    registered_name: chat_manager
    exception exit: {{{badmatch,{error,{{'EXIT',{badarg,[{erlang,whereis,[<<"aaa">>],[]},{gen,where,1,[{file,"gen.erl"},{line,299}]},{gen,start,6,[{file,"gen.erl"},{line,75}]},{supervisor,do_start_child,2,[{file,"supervisor.erl"},{line,365}]},{supervisor,handle_start_child,2,[{file,"supervisor.erl"},{line,724}]},{supervisor,handle_call,3,[{file,"supervisor.erl"},{line,422}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]}]}},{child,undefined,<<"aaa">>,{chat_room,start_link,[<<"aaa">>]},temporary,5000,worker,[chat_room]}}}},[{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,41}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chat_sup,<0.105.0>]
    messages: []
    links: [<0.106.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 242
  neighbours:
2018-10-20 00:02:50 =SUPERVISOR REPORT====
     Supervisor: {local,chat_sup}
     Context:    child_terminated
     Reason:     {{badmatch,{error,{{'EXIT',{badarg,[{erlang,whereis,[<<"aaa">>],[]},{gen,where,1,[{file,"gen.erl"},{line,299}]},{gen,start,6,[{file,"gen.erl"},{line,75}]},{supervisor,do_start_child,2,[{file,"supervisor.erl"},{line,365}]},{supervisor,handle_start_child,2,[{file,"supervisor.erl"},{line,724}]},{supervisor,handle_call,3,[{file,"supervisor.erl"},{line,422}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]}]}},{child,undefined,<<"aaa">>,{chat_room,start_link,[<<"aaa">>]},temporary,5000,worker,[chat_room]}}}},[{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,41}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.109.0>},{id,chat_manager},{mfargs,{chat_manager,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]

2018-10-20 00:02:50 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.213.0> exit with reason: [{reason,{{{badmatch,{error,{{'EXIT',{badarg,[{erlang,whereis,[<<"aaa">>],[]},{gen,where,1,[{file,"gen.erl"},{line,299}]},{gen,start,6,[{file,"gen.erl"},{line,75}]},{supervisor,do_start_child,2,[{file,"supervisor.erl"},{line,365}]},{supervisor,handle_start_child,2,[{file,"supervisor.erl"},{line,724}]},{supervisor,handle_call,3,[{file,"supervisor.erl"},{line,422}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]}]}},{child,undefined,<<"aaa">>,{chat_room,start_link,[<<"aaa">>]},temporary,5000,worker,[chat_room]}}}},[{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,41}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},{gen_server,call,[chat_manager,{add_room,<<"aaa">>}]}}},{mfa,{chat_handler,websocket_init,3}},{stacktrace,[{gen_server,call,2,[{file,"gen_server.erl"},{line,204}]},{chat_handler,websocket_init,3,[{file,"src/chat_handler.erl"},{line,25}]},{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,140}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{req,[{socket,#Port<0.3302>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.213.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},52416}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=aaa&name=aaa">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"connection">>,<<"Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36">>},{<<"upgrade">>,<<"websocket">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-version">>,<<"13">>},{<<"accept-encoding">>,<<"gzip, deflate, br">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7">>},{<<"cookie">>,<<"_ga=GA1.1.1280499160.1493491689">>},{<<"sec-websocket-key">>,<<"vsKb3yEfymJrk4csuCCGXA==">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate; client_max_window_bits">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[<<"client_max_window_bits">>]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}]
2018-10-20 00:06:36 =ERROR REPORT====
Error in process <0.213.0> with exit value:
{[{reason,{badmatch,ok}},{mfa,{chat_handler,websocket_init,3}},{stacktrace,[{chat_handler,websocket_init,3,[{file,"src/chat_handler.erl"},{line,26}]},{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,140}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{req,[{socket,#Port<0.3302>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.213.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},52428}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=aaaa&name=">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"connection">>,<<"Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36">>},{<<"upgrade">>,<<"websocket">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-version">>,<<"13">>},{<<"accept-encoding">>,<<"gzip, deflate, br">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7">>},{<<"cookie">>,<<"_ga=GA1.1.1280499160.1493491689">>},{<<"sec-websocket-key">>,<<"9GxehZgOaXRH9hJIM3scWQ==">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate; client_max_window_bits">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[<<"client_max_window_bits">>]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}],[{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,157}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-20 00:06:36 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.213.0> exit with reason: {[{reason,{badmatch,ok}},{mfa,{chat_handler,websocket_init,3}},{stacktrace,[{chat_handler,websocket_init,3,[{file,"src/chat_handler.erl"},{line,26}]},{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,140}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{req,[{socket,#Port<0.3302>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.213.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},52428}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=aaaa&name=">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"connection">>,<<"Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36">>},{<<"upgrade">>,<<"websocket">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-version">>,<<"13">>},{<<"accept-encoding">>,<<"gzip, deflate, br">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7">>},{<<"cookie">>,<<"_ga=GA1.1.1280499160.1493491689">>},{<<"sec-websocket-key">>,<<"9GxehZgOaXRH9hJIM3scWQ==">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate; client_max_window_bits">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[<<"client_max_window_bits">>]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}],[{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,157}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-20 00:07:23 =ERROR REPORT====
** Generic server aaaa terminating 
** Last message in was {'$gen_cast',{join,<<>>}}
** When Server state == {state,[],[]}
** Reason for termination == 
** {function_clause,[{chat_room,handle_cast,[{join,<<>>},{state,[],[]}],[{file,"src/chat_room.erl"},{line,29}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 00:07:23 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.214.0>
    registered_name: aaaa
    exception exit: {{function_clause,[{chat_room,handle_cast,[{join,<<>>},{state,[],[]}],[{file,"src/chat_room.erl"},{line,29}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 376
    stack_size: 27
    reductions: 195
  neighbours:
2018-10-20 00:07:23 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {function_clause,[{chat_room,handle_cast,[{join,<<>>},{state,[],[]}],[{file,"src/chat_room.erl"},{line,29}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.214.0>},{id,aaaa},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 00:08:28 =ERROR REPORT====
** Generic server chat_manager terminating 
** Last message in was {add_room,aaaa}
** When Server state == {state,[],[{aaaa,<0.214.0>}]}
** Reason for termination == 
** {{badmatch,{error,{already_started,<0.214.0>}}},[{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,41}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 00:08:28 =CRASH REPORT====
  crasher:
    initial call: chat_manager:init/1
    pid: <0.109.0>
    registered_name: chat_manager
    exception exit: {{{badmatch,{error,{already_started,<0.214.0>}}},[{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,41}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chat_sup,<0.105.0>]
    messages: []
    links: [<0.106.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 376
    stack_size: 27
    reductions: 271
  neighbours:
2018-10-20 00:08:28 =SUPERVISOR REPORT====
     Supervisor: {local,chat_sup}
     Context:    child_terminated
     Reason:     {{badmatch,{error,{already_started,<0.214.0>}}},[{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,41}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.109.0>},{id,chat_manager},{mfargs,{chat_manager,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]

2018-10-20 00:08:28 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.216.0> exit with reason: [{reason,{{{badmatch,{error,{already_started,<0.214.0>}}},[{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,41}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},{gen_server,call,[chat_manager,{add_room,aaaa}]}}},{mfa,{chat_handler,websocket_init,3}},{stacktrace,[{gen_server,call,2,[{file,"gen_server.erl"},{line,204}]},{chat_handler,websocket_init,3,[{file,"src/chat_handler.erl"},{line,26}]},{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,140}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{req,[{socket,#Port<0.3424>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.216.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},52437}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=aaaa&name=alex">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},{<<"accept">>,<<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"sec-websocket-version">>,<<"13">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate">>},{<<"sec-websocket-key">>,<<"EULiQPJeBx5t3Zy8ENRdSA==">>},{<<"dnt">>,<<"1">>},{<<"connection">>,<<"keep-alive, Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"upgrade">>,<<"websocket">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"keep-alive">>,<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}]
2018-10-20 00:41:54 =ERROR REPORT====
Error in process <0.216.0> with exit value:
{[{reason,function_clause},{mfa,{chat_handler,websocket_handle,3}},{stacktrace,[{gen_server,cast,[<<"aaaa">>,{msg,<<"b">>,<0.216.0>,<<"aaaaa">>}],[{file,"gen_server.erl"},{line,218}]},{chat_handler,websocket_handle,3,[{file,"src/chat_handler.erl"},{line,32}]},{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{msg,{text,<<"aaaaa">>}},{req,[{socket,#Port<0.3424>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.216.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},52574}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=aaaa&name=b">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"connection">>,<<"Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36">>},{<<"upgrade">>,<<"websocket">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-version">>,<<"13">>},{<<"accept-encoding">>,<<"gzip, deflate, br">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7">>},{<<"cookie">>,<<"_ga=GA1.1.1280499160.1493491689">>},{<<"sec-websocket-key">>,<<"1BUASeA4GO8iY0Dn9/kMug==">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate; client_max_window_bits">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[<<"client_max_window_bits">>]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,done},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{state,{state,<<"aaaa">>,<<"b">>}}],[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,652}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-20 00:41:54 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.216.0> exit with reason: {[{reason,function_clause},{mfa,{chat_handler,websocket_handle,3}},{stacktrace,[{gen_server,cast,[<<"aaaa">>,{msg,<<"b">>,<0.216.0>,<<"aaaaa">>}],[{file,"gen_server.erl"},{line,218}]},{chat_handler,websocket_handle,3,[{file,"src/chat_handler.erl"},{line,32}]},{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{msg,{text,<<"aaaaa">>}},{req,[{socket,#Port<0.3424>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.216.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},52574}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=aaaa&name=b">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"connection">>,<<"Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36">>},{<<"upgrade">>,<<"websocket">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-version">>,<<"13">>},{<<"accept-encoding">>,<<"gzip, deflate, br">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7">>},{<<"cookie">>,<<"_ga=GA1.1.1280499160.1493491689">>},{<<"sec-websocket-key">>,<<"1BUASeA4GO8iY0Dn9/kMug==">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate; client_max_window_bits">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[<<"client_max_window_bits">>]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,done},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{state,{state,<<"aaaa">>,<<"b">>}}],[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,652}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-20 00:44:10 =ERROR REPORT====
** Generic server aaaa terminating 
** Last message in was {'$gen_cast',{msg,<<"b">>,<0.216.0>,<<"aaaaa">>}}
** When Server state == {state,[{<<"b">>,<0.216.0>},{<<"alex">>,<0.213.0>}],[]}
** Reason for termination == 
** {function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 00:44:10 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.214.0>
    registered_name: aaaa
    exception exit: {{function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 245
  neighbours:
2018-10-20 00:44:10 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.214.0>},{id,aaaa},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 00:49:29 =ERROR REPORT====
** Generic server aaaa terminating 
** Last message in was {'$gen_cast',{msg,<<"b">>,<0.216.0>,<<"aaaaa">>}}
** When Server state == {state,[{<<"b">>,<0.216.0>},{<<"alex">>,<0.213.0>}],[]}
** Reason for termination == 
** {function_clause,[{gen_server,cast,[{<<"alex">>,<0.213.0>},{msg,{<<"b">>,<<"aaaaa">>}}],[{file,"gen_server.erl"},{line,218}]},{chat_room,send_to_other,2,[{file,"src/chat_room.erl"},{line,50}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 00:49:29 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.214.0>
    registered_name: aaaa
    exception exit: {{function_clause,[{gen_server,cast,[{<<"alex">>,<0.213.0>},{msg,{<<"b">>,<<"aaaaa">>}}],[{file,"gen_server.erl"},{line,218}]},{chat_room,send_to_other,2,[{file,"src/chat_room.erl"},{line,50}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 251
  neighbours:
2018-10-20 00:49:29 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {function_clause,[{gen_server,cast,[{<<"alex">>,<0.213.0>},{msg,{<<"b">>,<<"aaaaa">>}}],[{file,"gen_server.erl"},{line,218}]},{chat_room,send_to_other,2,[{file,"src/chat_room.erl"},{line,50}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.214.0>},{id,aaaa},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 00:50:33 =ERROR REPORT====
** Generic server aaaa terminating 
** Last message in was {'$gen_cast',{msg,<<"b">>,<0.216.0>,<<"aaaaa">>}}
** When Server state == {state,[{<<"b">>,<0.216.0>},{<<"alex">>,<0.213.0>}],[]}
** Reason for termination == 
** {function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 00:50:33 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.214.0>
    registered_name: aaaa
    exception exit: {{function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 245
  neighbours:
2018-10-20 00:50:33 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.214.0>},{id,aaaa},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 00:53:53 =ERROR REPORT====
** Generic server aaaa terminating 
** Last message in was {'$gen_cast',{msg,<<"alex">>,<0.216.0>,<<"ssssss">>}}
** When Server state == {state,[{<<"alex">>,<0.216.0>},{<<"b">>,<0.213.0>}],[]}
** Reason for termination == 
** {function_clause,[{chat_room,send_to_other,[[{<<"b">>,<0.213.0>}],{<<"alex">>,<<"ssssss">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 00:53:53 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.214.0>
    registered_name: aaaa
    exception exit: {{function_clause,[{chat_room,send_to_other,[[{<<"b">>,<0.213.0>}],{<<"alex">>,<<"ssssss">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 245
  neighbours:
2018-10-20 00:53:53 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {function_clause,[{chat_room,send_to_other,[[{<<"b">>,<0.213.0>}],{<<"alex">>,<<"ssssss">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.214.0>},{id,aaaa},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 00:59:51 =ERROR REPORT====
** Generic server aaaa terminating 
** Last message in was {'$gen_cast',{msg,<<"b">>,<0.216.0>,<<"aaaaa">>}}
** When Server state == {state,[{<<"b">>,<0.216.0>},{<<"alex">>,<0.213.0>}],[]}
** Reason for termination == 
** {function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 00:59:51 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.214.0>
    registered_name: aaaa
    exception exit: {{function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 245
  neighbours:
2018-10-20 00:59:51 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.214.0>},{id,aaaa},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 01:02:57 =ERROR REPORT====
** Generic server aaaa terminating 
** Last message in was {'$gen_cast',{msg,<<"b">>,<0.216.0>,<<"aaaaa">>}}
** When Server state == {state,aaaa,[{<<"b">>,<0.216.0>},{<<"alex">>,<0.213.0>}],[]}
** Reason for termination == 
** {function_clause,[{chat_room,handle_cast,[{msg,<<"b">>,<0.216.0>,<<"aaaaa">>},{state,aaaa,[{<<"b">>,<0.216.0>},{<<"alex">>,<0.213.0>}],[]}],[{file,"src/chat_room.erl"},{line,30}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 01:02:57 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.214.0>
    registered_name: aaaa
    exception exit: {{function_clause,[{chat_room,handle_cast,[{msg,<<"b">>,<0.216.0>,<<"aaaaa">>},{state,aaaa,[{<<"b">>,<0.216.0>},{<<"alex">>,<0.213.0>}],[]}],[{file,"src/chat_room.erl"},{line,30}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 192
  neighbours:
2018-10-20 01:02:57 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {function_clause,[{chat_room,handle_cast,[{msg,<<"b">>,<0.216.0>,<<"aaaaa">>},{state,aaaa,[{<<"b">>,<0.216.0>},{<<"alex">>,<0.213.0>}],[]}],[{file,"src/chat_room.erl"},{line,30}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.214.0>},{id,aaaa},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 01:05:48 =ERROR REPORT====
** Generic server aaaa terminating 
** Last message in was {'$gen_cast',{msg,<<"alex">>,<0.216.0>,<<"ssssss">>}}
** When Server state == {state,aaaa,[{<<"alex">>,<0.216.0>},{<<"b">>,<0.213.0>}],[]}
** Reason for termination == 
** {function_clause,[{chat_room,handle_cast,[{msg,<<"alex">>,<0.216.0>,<<"ssssss">>},{state,aaaa,[{<<"alex">>,<0.216.0>},{<<"b">>,<0.213.0>}],[]}],[{file,"src/chat_room.erl"},{line,30}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 01:05:48 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.214.0>
    registered_name: aaaa
    exception exit: {{function_clause,[{chat_room,handle_cast,[{msg,<<"alex">>,<0.216.0>,<<"ssssss">>},{state,aaaa,[{<<"alex">>,<0.216.0>},{<<"b">>,<0.213.0>}],[]}],[{file,"src/chat_room.erl"},{line,30}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 192
  neighbours:
2018-10-20 01:05:48 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {function_clause,[{chat_room,handle_cast,[{msg,<<"alex">>,<0.216.0>,<<"ssssss">>},{state,aaaa,[{<<"alex">>,<0.216.0>},{<<"b">>,<0.213.0>}],[]}],[{file,"src/chat_room.erl"},{line,30}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.214.0>},{id,aaaa},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 01:06:58 =ERROR REPORT====
** Generic server aaaa terminating 
** Last message in was {'$gen_cast',{msg,<<"b">>,<0.216.0>,<<"aaaaa">>}}
** When Server state == {state,aaaa,[{<<"b">>,<0.216.0>},{<<"alex">>,<0.213.0>}],[]}
** Reason for termination == 
** {function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 01:06:58 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.214.0>
    registered_name: aaaa
    exception exit: {{function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 246
  neighbours:
2018-10-20 01:06:58 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {function_clause,[{chat_room,send_to_other,[[{<<"alex">>,<0.213.0>}],{<<"b">>,<<"aaaaa">>}],[{file,"src/chat_room.erl"},{line,49}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,36}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.214.0>},{id,aaaa},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 01:11:45 =ERROR REPORT====
** Generic server aaaa terminating 
** Last message in was {'$gen_cast',{msg,<<"b">>,<0.213.0>,<<"hello!">>}}
** When Server state == {state,aaaa,[{<<"alex">>,<0.216.0>},{<<"b">>,<0.213.0>}],<<"ssssss">>}
** Reason for termination == 
** {badarg,[{erlang,'++',[<<"ssssss">>,<<"hello!">>],[]},{lists,append,2,[{file,"lists.erl"},{line,116}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,34}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-20 01:11:45 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.214.0>
    registered_name: aaaa
    exception exit: {{badarg,[{erlang,'++',[<<"ssssss">>,<<"hello!">>],[]},{lists,append,2,[{file,"lists.erl"},{line,116}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,34}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 245
  neighbours:
2018-10-20 01:11:45 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {badarg,[{erlang,'++',[<<"ssssss">>,<<"hello!">>],[]},{lists,append,2,[{file,"lists.erl"},{line,116}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,34}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.214.0>},{id,aaaa},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 01:14:17 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.218.0>},{id,bbbb},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 22:58:20 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.220.0>},{id,room2},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-20 23:58:01 =ERROR REPORT====
Error in process <0.213.0> with exit value:
{[{reason,{badmatch,ok}},{mfa,{chat_handler,websocket_init,3}},{stacktrace,[{chat_handler,websocket_init,3,[{file,"src/chat_handler.erl"},{line,23}]},{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,140}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{req,[{socket,#Port<0.3302>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.213.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},49552}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=room1&name=alex">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},{<<"accept">>,<<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"sec-websocket-version">>,<<"13">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate">>},{<<"sec-websocket-key">>,<<"XPN+2eEKFNUoRn2Ki/9l8g==">>},{<<"dnt">>,<<"1">>},{<<"connection">>,<<"keep-alive, Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"upgrade">>,<<"websocket">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"keep-alive">>,<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}],[{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,157}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-20 23:58:01 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.213.0> exit with reason: {[{reason,{badmatch,ok}},{mfa,{chat_handler,websocket_init,3}},{stacktrace,[{chat_handler,websocket_init,3,[{file,"src/chat_handler.erl"},{line,23}]},{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,140}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{req,[{socket,#Port<0.3302>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.213.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},49552}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=room1&name=alex">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},{<<"accept">>,<<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"sec-websocket-version">>,<<"13">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate">>},{<<"sec-websocket-key">>,<<"XPN+2eEKFNUoRn2Ki/9l8g==">>},{<<"dnt">>,<<"1">>},{<<"connection">>,<<"keep-alive, Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"upgrade">>,<<"websocket">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"keep-alive">>,<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}],[{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,157}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:00:30 =ERROR REPORT====
Error in process <0.213.0> with exit value:
{[{reason,{badmatch,ok}},{mfa,{chat_handler,websocket_init,3}},{stacktrace,[{chat_handler,websocket_init,3,[{file,"src/chat_handler.erl"},{line,23}]},{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,140}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{req,[{socket,#Port<0.3302>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.213.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},49556}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=room1&name=alex">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},{<<"accept">>,<<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"sec-websocket-version">>,<<"13">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate">>},{<<"sec-websocket-key">>,<<"wZA7qYo94K9aPQGniiztCg==">>},{<<"dnt">>,<<"1">>},{<<"connection">>,<<"keep-alive, Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"upgrade">>,<<"websocket">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"keep-alive">>,<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}],[{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,157}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:00:30 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.213.0> exit with reason: {[{reason,{badmatch,ok}},{mfa,{chat_handler,websocket_init,3}},{stacktrace,[{chat_handler,websocket_init,3,[{file,"src/chat_handler.erl"},{line,23}]},{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,140}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{req,[{socket,#Port<0.3302>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.213.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},49556}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=room1&name=alex">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},{<<"accept">>,<<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"sec-websocket-version">>,<<"13">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate">>},{<<"sec-websocket-key">>,<<"wZA7qYo94K9aPQGniiztCg==">>},{<<"dnt">>,<<"1">>},{<<"connection">>,<<"keep-alive, Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"upgrade">>,<<"websocket">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"keep-alive">>,<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}],[{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,157}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:02:27 =ERROR REPORT====
** Generic server chat_manager terminating 
** Last message in was {join_room,<<"room1">>,<0.213.0>}
** When Server state == {state,24599,28696}
** Reason for termination == 
** {badarg,[{erlang,list_to_atom,[[114,111,111,109,95,[60,60,["54",44,"56",44,"52",44,"54"],62,62]]],[]},{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,43}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-21 00:02:27 =CRASH REPORT====
  crasher:
    initial call: chat_manager:init/1
    pid: <0.109.0>
    registered_name: chat_manager
    exception exit: {{badarg,[{erlang,list_to_atom,[[114,111,111,109,95,[60,60,["54",44,"56",44,"52",44,"54"],62,62]]],[]},{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,43}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chat_sup,<0.105.0>]
    messages: []
    links: [<0.106.0>]
    dictionary: [{rand_seed,{#{max => 288230376151711743,next => #Fun<rand.8.41921595>,type => exsplus,uniform => #Fun<rand.9.41921595>,uniform_n => #Fun<rand.10.41921595>},[99040122389838082|153462729479308763]}}]
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 278
  neighbours:
2018-10-21 00:02:27 =SUPERVISOR REPORT====
     Supervisor: {local,chat_sup}
     Context:    child_terminated
     Reason:     {badarg,[{erlang,list_to_atom,[[114,111,111,109,95,[60,60,["54",44,"56",44,"52",44,"54"],62,62]]],[]},{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,43}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.109.0>},{id,chat_manager},{mfargs,{chat_manager,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]

2018-10-21 00:02:27 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.213.0> exit with reason: [{reason,{{badarg,[{erlang,list_to_atom,[[114,111,111,109,95,[60,60,["54",44,"56",44,"52",44,"54"],62,62]]],[]},{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,43}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},{gen_server,call,[chat_manager,{join_room,<<"room1">>,<0.213.0>}]}}},{mfa,{chat_handler,websocket_init,3}},{stacktrace,[{gen_server,call,2,[{file,"gen_server.erl"},{line,204}]},{chat_handler,websocket_init,3,[{file,"src/chat_handler.erl"},{line,23}]},{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,140}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{req,[{socket,#Port<0.3302>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.213.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},49558}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=room1&name=alex">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},{<<"accept">>,<<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"sec-websocket-version">>,<<"13">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate">>},{<<"sec-websocket-key">>,<<"JV+sP98lWIrRcmYQ3S1hxQ==">>},{<<"dnt">>,<<"1">>},{<<"connection">>,<<"keep-alive, Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"upgrade">>,<<"websocket">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"keep-alive">>,<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}]
2018-10-21 00:03:27 =ERROR REPORT====
** Generic server chat_manager terminating 
** Last message in was {join_room,<<"room1">>,<0.213.0>}
** When Server state == {state,24599,28696}
** Reason for termination == 
** {badarg,[{erlang,list_to_atom,[[114,111,111,109,95,"6499"]],[]},{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,43}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-21 00:03:27 =CRASH REPORT====
  crasher:
    initial call: chat_manager:init/1
    pid: <0.109.0>
    registered_name: chat_manager
    exception exit: {{badarg,[{erlang,list_to_atom,[[114,111,111,109,95,"6499"]],[]},{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,43}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chat_sup,<0.105.0>]
    messages: []
    links: [<0.106.0>]
    dictionary: [{rand_seed,{#{max => 288230376151711743,next => #Fun<rand.8.41921595>,type => exsplus,uniform => #Fun<rand.9.41921595>,uniform_n => #Fun<rand.10.41921595>},[43181600636404200|210635563249362298]}}]
    trap_exit: false
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 299
  neighbours:
2018-10-21 00:03:27 =SUPERVISOR REPORT====
     Supervisor: {local,chat_sup}
     Context:    child_terminated
     Reason:     {badarg,[{erlang,list_to_atom,[[114,111,111,109,95,"6499"]],[]},{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,43}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.109.0>},{id,chat_manager},{mfargs,{chat_manager,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]

2018-10-21 00:03:27 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.213.0> exit with reason: [{reason,{{badarg,[{erlang,list_to_atom,[[114,111,111,109,95,"6499"]],[]},{chat_manager,handle_call,3,[{file,"src/chat_manager.erl"},{line,43}]},{gen_server,try_handle_call,4,[{file,"gen_server.erl"},{line,615}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,647}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},{gen_server,call,[chat_manager,{join_room,<<"room1">>,<0.213.0>}]}}},{mfa,{chat_handler,websocket_init,3}},{stacktrace,[{gen_server,call,2,[{file,"gen_server.erl"},{line,204}]},{chat_handler,websocket_init,3,[{file,"src/chat_handler.erl"},{line,23}]},{cowboy_websocket,handler_init,3,[{file,"src/cowboy_websocket.erl"},{line,140}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]},{req,[{socket,#Port<0.3302>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.213.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},49559}},{host,<<"localhost">>},{host_info,undefined},{port,8080},{path,<<"/ws">>},{path_info,undefined},{qs,<<"room=room1&name=alex">>},{qs_vals,undefined},{bindings,[]},{headers,[{<<"host">>,<<"localhost:8080">>},{<<"user-agent">>,<<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},{<<"accept">>,<<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>},{<<"accept-language">>,<<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"sec-websocket-version">>,<<"13">>},{<<"origin">>,<<"http://localhost:8080">>},{<<"sec-websocket-extensions">>,<<"permessage-deflate">>},{<<"sec-websocket-key">>,<<"hK84efLnvawWEt/wRM6wUw==">>},{<<"dnt">>,<<"1">>},{<<"connection">>,<<"keep-alive, Upgrade">>},{<<"pragma">>,<<"no-cache">>},{<<"cache-control">>,<<"no-cache">>},{<<"upgrade">>,<<"websocket">>}]},{p_headers,[{<<"sec-websocket-extensions">>,[{<<"permessage-deflate">>,[]}]},{<<"upgrade">>,[<<"websocket">>]},{<<"connection">>,[<<"keep-alive">>,<<"upgrade">>]}]},{cookies,undefined},{meta,[{websocket_compress,false},{websocket_version,13}]},{body_state,waiting},{multipart,undefined},{buffer,<<>>},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}]
2018-10-21 00:13:59 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_8603},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:13:59 =ERROR REPORT====
Error in process <0.247.0> with exit value:
{undef,[{chat_manager,terminate_room_clients,[[<0.213.0>],[<0.216.0>]],[]}]}
2018-10-21 00:16:22 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_905},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:17:50 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_8617},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:17:50 =ERROR REPORT====
Error in process <0.246.0> with exit value:
{function_clause,[{chat_manager,terminate_room_clients,[<0.213.0>],[{file,"src/chat_manager.erl"},{line,82}]}]}
2018-10-21 00:20:39 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_1866},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:20:39 =ERROR REPORT====
Error in process <0.246.0> with exit value:
{function_clause,[{chat_manager,terminate_room_clients,[<0.213.0>],[{file,"src/chat_manager.erl"},{line,83}]}]}
2018-10-21 00:21:45 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_6859},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:21:45 =ERROR REPORT====
Error in process <0.246.0> with exit value:
{function_clause,[{chat_manager,terminate_room_clients,[<0.213.0>],[{file,"src/chat_manager.erl"},{line,83}]}]}
2018-10-21 00:23:07 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_8228},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:24:31 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_9104},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:24:31 =ERROR REPORT====
Error in process <0.213.0> with exit value:
{{try_clause,{stop,{state,{room_9104,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:24:31 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.213.0> exit with reason: {{try_clause,{stop,{state,{room_9104,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:30:33 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_4209},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:30:33 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.216.0> exit with reason: {{try_clause,{stop,{state,{room_4209,<<"room1">>},<<"john">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:30:33 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.213.0> exit with reason: {{try_clause,{stop,{state,{room_4209,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:30:33 =ERROR REPORT====
Error in process <0.216.0> with exit value:
{{try_clause,{stop,{state,{room_4209,<<"room1">>},<<"john">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:30:33 =ERROR REPORT====
Error in process <0.213.0> with exit value:
{{try_clause,{stop,{state,{room_4209,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:34:15 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.251.0>},{id,room_9032},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:34:15 =ERROR REPORT====
Error in process <0.253.0> with exit value:
{{try_clause,{stop,{state,{room_9032,<<"room1">>},<<"john">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,resume,6,[{file,"src/cowboy_protocol.erl"},{line,545}]}]}
2018-10-21 00:34:15 =ERROR REPORT====
Error in process <0.250.0> with exit value:
{{try_clause,{stop,{state,{room_9032,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,resume,6,[{file,"src/cowboy_protocol.erl"},{line,545}]}]}
2018-10-21 00:34:15 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.253.0> exit with reason: {{try_clause,{stop,{state,{room_9032,<<"room1">>},<<"john">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,resume,6,[{file,"src/cowboy_protocol.erl"},{line,545}]}]}
2018-10-21 00:34:15 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.250.0> exit with reason: {{try_clause,{stop,{state,{room_9032,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,resume,6,[{file,"src/cowboy_protocol.erl"},{line,545}]}]}
2018-10-21 00:35:15 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.265.0>},{id,room_2042},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:35:15 =ERROR REPORT====
Error in process <0.267.0> with exit value:
{{try_clause,{stop,{state,{room_2042,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,resume,6,[{file,"src/cowboy_protocol.erl"},{line,545}]}]}
2018-10-21 00:35:15 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.267.0> exit with reason: {{try_clause,{stop,{state,{room_2042,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,resume,6,[{file,"src/cowboy_protocol.erl"},{line,545}]}]}
2018-10-21 00:35:15 =ERROR REPORT====
Error in process <0.264.0> with exit value:
{{try_clause,{stop,{state,{room_2042,<<"room1">>},<<"john">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,resume,6,[{file,"src/cowboy_protocol.erl"},{line,545}]}]}
2018-10-21 00:35:15 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.264.0> exit with reason: {{try_clause,{stop,{state,{room_2042,<<"room1">>},<<"john">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,resume,6,[{file,"src/cowboy_protocol.erl"},{line,545}]}]}
2018-10-21 00:37:32 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_5361},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:37:32 =ERROR REPORT====
Error in process <0.213.0> with exit value:
{{try_clause,{stop,normal,{state,{room_5361,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:37:32 =ERROR REPORT====
Error in process <0.216.0> with exit value:
{{try_clause,{stop,normal,{state,{room_5361,<<"room1">>},<<"john">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:37:32 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.213.0> exit with reason: {{try_clause,{stop,normal,{state,{room_5361,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:37:32 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.216.0> exit with reason: {{try_clause,{stop,normal,{state,{room_5361,<<"room1">>},<<"john">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:41:23 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_5981},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:47:07 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_8793},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:49:26 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.237.0>},{id,room_498},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:51:36 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.237.0>},{id,room_4867},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:53:54 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.237.0>},{id,room_6756},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:53:54 =ERROR REPORT====
Error in process <0.236.0> with exit value:
{{try_clause,{stop,{state,{room_6756,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:53:54 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.236.0> exit with reason: {{try_clause,{stop,{state,{room_6756,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:59:36 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.214.0>},{id,room_8999},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 00:59:36 =ERROR REPORT====
Error in process <0.213.0> with exit value:
{{try_clause,{close,{state,{room_8999,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 00:59:36 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.213.0> exit with reason: {{try_clause,{close,{state,{room_8999,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 01:02:38 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.241.0>},{id,room_1779},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 01:02:38 =ERROR REPORT====
Error in process <0.240.0> with exit value:
{{try_clause,{stop,{state,{room_1779,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 01:02:38 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.240.0> exit with reason: {{try_clause,{stop,{state,{room_1779,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 01:04:11 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.241.0>},{id,room_8033},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 01:04:11 =ERROR REPORT====
Error in process <0.240.0> with exit value:
{{try_clause,{stop,{state,{room_8033,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 01:04:11 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.240.0> exit with reason: {{try_clause,{stop,{state,{room_8033,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 01:33:26 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.215.0>},{id,room_5424},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 01:33:26 =ERROR REPORT====
Error in process <0.214.0> with exit value:
{{try_clause,{stop,{state,{room_5424,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,resume,6,[{file,"src/cowboy_protocol.erl"},{line,545}]}]}
2018-10-21 01:33:26 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.214.0> exit with reason: {{try_clause,{stop,{state,{room_5424,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,resume,6,[{file,"src/cowboy_protocol.erl"},{line,545}]}]}
2018-10-21 09:24:07 =ERROR REPORT====
** State machine default_bot terminating 
** Last event in was timeout
** When State == idle
**      Data  == {state,default,default_bot}
** Reason for termination = 
** {'function not exported',[{rand,unifrom,[4],[]},{bot,do_random_msg,1,[{file,"src/bot.erl"},{line,66}]},{bot,idle,2,[{file,"src/bot.erl"},{line,32}]},{gen_fsm,handle_msg,7,[{file,"gen_fsm.erl"},{line,451}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-21 09:24:07 =CRASH REPORT====
  crasher:
    initial call: bot:init/1
    pid: <0.213.0>
    registered_name: default_bot
    exception exit: {{undef,[{rand,unifrom,[4],[]},{bot,do_random_msg,1,[{file,"src/bot.erl"},{line,66}]},{bot,idle,2,[{file,"src/bot.erl"},{line,32}]},{gen_fsm,handle_msg,7,[{file,"gen_fsm.erl"},{line,451}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_fsm,terminate,7,[{file,"gen_fsm.erl"},{line,559}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [default,chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.108.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 177
  neighbours:
2018-10-21 09:24:23 =ERROR REPORT====
** State machine default_bot terminating 
** Last event in was timeout
** When State == idle
**      Data  == {state,default,default_bot}
** Reason for termination = 
** {function_clause,[{lists,nth,[3,4],[{file,"lists.erl"},{line,170}]},{bot,do_random_msg,1,[{file,"src/bot.erl"},{line,67}]},{bot,idle,2,[{file,"src/bot.erl"},{line,32}]},{gen_fsm,handle_msg,7,[{file,"gen_fsm.erl"},{line,451}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-21 09:24:23 =CRASH REPORT====
  crasher:
    initial call: bot:init/1
    pid: <0.213.0>
    registered_name: default_bot
    exception exit: {{function_clause,[{lists,nth,[3,4],[{file,"lists.erl"},{line,170}]},{bot,do_random_msg,1,[{file,"src/bot.erl"},{line,67}]},{bot,idle,2,[{file,"src/bot.erl"},{line,32}]},{gen_fsm,handle_msg,7,[{file,"gen_fsm.erl"},{line,451}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_fsm,terminate,7,[{file,"gen_fsm.erl"},{line,559}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [default,chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.108.0>]
    dictionary: [{rand_seed,{#{max => 288230376151711743,next => #Fun<rand.8.41921595>,type => exsplus,uniform => #Fun<rand.9.41921595>,uniform_n => #Fun<rand.10.41921595>},[118815628478336611|221262343771892719]}}]
    trap_exit: false
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 228
  neighbours:
2018-10-21 09:24:39 =ERROR REPORT====
** State machine default_bot terminating 
** Last event in was timeout
** When State == idle
**      Data  == {state,default,default_bot}
** Reason for termination = 
** {function_clause,[{lists,nth,[4,4],[{file,"lists.erl"},{line,170}]},{bot,do_random_msg,1,[{file,"src/bot.erl"},{line,67}]},{bot,idle,2,[{file,"src/bot.erl"},{line,32}]},{gen_fsm,handle_msg,7,[{file,"gen_fsm.erl"},{line,451}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-21 09:24:39 =CRASH REPORT====
  crasher:
    initial call: bot:init/1
    pid: <0.213.0>
    registered_name: default_bot
    exception exit: {{function_clause,[{lists,nth,[4,4],[{file,"lists.erl"},{line,170}]},{bot,do_random_msg,1,[{file,"src/bot.erl"},{line,67}]},{bot,idle,2,[{file,"src/bot.erl"},{line,32}]},{gen_fsm,handle_msg,7,[{file,"gen_fsm.erl"},{line,451}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_fsm,terminate,7,[{file,"gen_fsm.erl"},{line,559}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [default,chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.108.0>]
    dictionary: [{rand_seed,{#{max => 288230376151711743,next => #Fun<rand.8.41921595>,type => exsplus,uniform => #Fun<rand.9.41921595>,uniform_n => #Fun<rand.10.41921595>},[227928582033207069|211786906421716290]}}]
    trap_exit: false
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 228
  neighbours:
2018-10-21 09:25:03 =ERROR REPORT====
** Generic server room_8360 terminating 
** Last message in was {'$gen_cast',{join,<<"alex">>,<0.216.0>}}
** When Server state == {state,room_8360,[],[]}
** Reason for termination == 
** {'function not exported',[{gen_fsm,send_event,[{joned,<<"alex">>}],[]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,38}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-21 09:25:03 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.217.0>
    registered_name: room_8360
    exception exit: {{undef,[{gen_fsm,send_event,[{joned,<<"alex">>}],[]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,38}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 206
  neighbours:
2018-10-21 09:25:03 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {undef,[{gen_fsm,send_event,[{joned,<<"alex">>}],[]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,38}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.217.0>},{id,room_8360},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 09:25:03 =ERROR REPORT====
Error in process <0.216.0> with exit value:
{{try_clause,{stop,{state,{room_8360,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 09:25:03 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.216.0> exit with reason: {{try_clause,{stop,{state,{room_8360,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 09:26:42 =ERROR REPORT====
** Generic server room_7257 terminating 
** Last message in was {'$gen_cast',{join,<<"alex">>,<0.214.0>}}
** When Server state == {state,room_7257,room_7257_bot,[],[]}
** Reason for termination == 
** {badarg,[{gen_fsm,send_event,2,[{file,"gen_fsm.erl"},{line,215}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,39}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-21 09:26:42 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.215.0>
    registered_name: room_7257
    exception exit: {{badarg,[{gen_fsm,send_event,2,[{file,"gen_fsm.erl"},{line,215}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,39}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 157
  neighbours:
2018-10-21 09:26:42 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {badarg,[{gen_fsm,send_event,2,[{file,"gen_fsm.erl"},{line,215}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,39}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.215.0>},{id,room_7257},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 09:26:42 =ERROR REPORT====
Error in process <0.214.0> with exit value:
{{try_clause,{stop,{state,{room_7257,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 09:26:42 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.214.0> exit with reason: {{try_clause,{stop,{state,{room_7257,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 09:28:44 =ERROR REPORT====
** Generic server room_8276 terminating 
** Last message in was {'$gen_cast',{join,<<"alex">>,<0.214.0>}}
** When Server state == {state,room_8276,{ok,<0.216.0>},[],[]}
** Reason for termination == 
** {badarg,[{gen_fsm,send_event,2,[{file,"gen_fsm.erl"},{line,215}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,41}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-21 09:28:44 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.215.0>
    registered_name: room_8276
    exception exit: {{badarg,[{gen_fsm,send_event,2,[{file,"gen_fsm.erl"},{line,215}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,41}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>,<0.216.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 189
  neighbours:
    neighbour: [{pid,<0.216.0>},{registered_name,room_8276_bot},{initial_call,{bot,init,['Argument__1']}},{current_function,{gen_fsm,loop,7}},{ancestors,[room_8276,chatroom_sup,chat_sup,<0.105.0>]},{messages,[]},{links,[<0.215.0>]},{dictionary,[{rand_seed,{#{max => 288230376151711743,next => #Fun<rand.8.41921595>,type => exsplus,uniform => #Fun<rand.9.41921595>,uniform_n => #Fun<rand.10.41921595>},[233201289916697126|14679414593434755]}}]},{trap_exit,false},{status,waiting},{heap_size,233},{stack_size,10},{reductions,64}]
2018-10-21 09:28:44 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {badarg,[{gen_fsm,send_event,2,[{file,"gen_fsm.erl"},{line,215}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,41}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.215.0>},{id,room_8276},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 09:28:44 =ERROR REPORT====
Error in process <0.214.0> with exit value:
{{try_clause,{stop,{state,{room_8276,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 09:28:44 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.214.0> exit with reason: {{try_clause,{stop,{state,{room_8276,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 09:30:46 =ERROR REPORT====
** Generic server room_3808 terminating 
** Last message in was {'$gen_cast',{join,<<"alex">>,<0.214.0>}}
** When Server state == {state,room_3808,{ok,<0.216.0>},[],[]}
** Reason for termination == 
** {badarg,[{gen_fsm,send_event,2,[{file,"gen_fsm.erl"},{line,215}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,42}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-21 09:30:46 =CRASH REPORT====
  crasher:
    initial call: chat_room:init/1
    pid: <0.215.0>
    registered_name: room_3808
    exception exit: {{badarg,[{gen_fsm,send_event,2,[{file,"gen_fsm.erl"},{line,215}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,42}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chatroom_sup,chat_sup,<0.105.0>]
    messages: []
    links: [<0.107.0>,<0.216.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 239
  neighbours:
    neighbour: [{pid,<0.216.0>},{registered_name,room_3808_bot},{initial_call,{bot,init,['Argument__1']}},{current_function,{gen_fsm,loop,7}},{ancestors,[room_3808,chatroom_sup,chat_sup,<0.105.0>]},{messages,[]},{links,[<0.215.0>]},{dictionary,[{rand_seed,{#{max => 288230376151711743,next => #Fun<rand.8.41921595>,type => exsplus,uniform => #Fun<rand.9.41921595>,uniform_n => #Fun<rand.10.41921595>},[263156221324220592|26375412445187740]}}]},{trap_exit,false},{status,waiting},{heap_size,233},{stack_size,10},{reductions,63}]
2018-10-21 09:30:46 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     {badarg,[{gen_fsm,send_event,2,[{file,"gen_fsm.erl"},{line,215}]},{chat_room,handle_cast,2,[{file,"src/chat_room.erl"},{line,42}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.215.0>},{id,room_3808},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 09:30:46 =ERROR REPORT====
Error in process <0.214.0> with exit value:
{{try_clause,{stop,{state,{room_3808,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 09:30:46 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_protocol:start_link/4 at <0.214.0> exit with reason: {{try_clause,{stop,{state,{room_3808,<<"room1">>},<<"alex">>}}},[{cowboy_websocket,handler_call,7,[{file,"src/cowboy_websocket.erl"},{line,598}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,529}]}]}
2018-10-21 14:18:11 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.138.0>
    registered_name: []
    exception exit: {{function_clause,[{cowboy_router,execute,[#{body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"jBxFj1sHfNllpKu4fip/Kw==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49383},pid => <0.137.0>,port => 8080,qs => <<"room=room1&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},{dispatch,[{'_',[],[{[],[],cowboy_static,{priv_file,chat,"index.html"}},{[<<"ws">>],[],chat_handler,[]}]}]}],[{file,"src/cowboy_router.erl"},{line,163}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{cowboy_router,execute,[#{body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"jBxFj1sHfNllpKu4fip/Kw==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49383},pid => <0.137.0>,port => 8080,qs => <<"room=room1&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},{dispatch,[{'_',[],[{[],[],cowboy_static,{priv_file,chat,"index.html"}},{[<<"ws">>],[],chat_handler,[]}]}]}],[{file,"src/cowboy_router.erl"},{line,163}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.137.0>,<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.137.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 187
  neighbours:
2018-10-21 14:18:11 =ERROR REPORT====
Ranch listener http, connection process <0.137.0>, stream 1 had its request process <0.138.0> exit with reason function_clause and stacktrace [{cowboy_router,execute,[#{body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"jBxFj1sHfNllpKu4fip/Kw==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49383},pid => <0.137.0>,port => 8080,qs => <<"room=room1&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},{dispatch,[{'_',[],[{[],[],cowboy_static,{priv_file,chat,"index.html"}},{[<<"ws">>],[],chat_handler,[]}]}]}],[{file,"src/cowboy_router.erl"},{line,163}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-10-21 14:19:41 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.138.0>
    registered_name: []
    exception exit: {{undef,[{chat_handler,init,[#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"OTGA2BVh88ZS2pYkH9YDRw==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,host_info => undefined,method => <<"GET">>,path => <<"/ws">>,path_info => undefined,peer => {{127,0,0,1},49384},pid => <0.137.0>,port => 8080,qs => <<"room=room1&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},[]],[]},{cowboy_handler,execute,2,[{file,"src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{chat_handler,init,[#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"OTGA2BVh88ZS2pYkH9YDRw==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,host_info => undefined,method => <<"GET">>,path => <<"/ws">>,path_info => undefined,peer => {{127,0,0,1},49384},pid => <0.137.0>,port => 8080,qs => <<"room=room1&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},[]],[]},{cowboy_handler,execute,2,[{file,"src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.137.0>,<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.137.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 254
  neighbours:
2018-10-21 14:19:41 =ERROR REPORT====
Ranch listener http, connection process <0.137.0>, stream 1 had its request process <0.138.0> exit with reason undef and stacktrace [{chat_handler,init,[#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"OTGA2BVh88ZS2pYkH9YDRw==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,host_info => undefined,method => <<"GET">>,path => <<"/ws">>,path_info => undefined,peer => {{127,0,0,1},49384},pid => <0.137.0>,port => 8080,qs => <<"room=room1&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},[]],[]},{cowboy_handler,execute,2,[{file,"src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-10-21 14:25:32 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.137.0>
    registered_name: []
    exception error: {undef,[{chat_handler,websocket_handle,[{text,<<"sssss">>},[]],[]},{cowboy_websocket,handler_call,6,[{file,"src/cowboy_websocket.erl"},{line,466}]},{cowboy_http,loop,2,[{file,"src/cowboy_http.erl"},{line,218}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3618>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 2164
  neighbours:
2018-10-21 14:25:32 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.137.0> exit with reason: undef
2018-10-21 14:39:43 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.138.0>
    registered_name: []
    exception exit: {{undef,[{cowboy_req,qs_val,[<<"room">>,#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"oCw0TFlWfKXfpK4qM8Oz4w==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,host_info => undefined,method => <<"GET">>,path => <<"/ws">>,path_info => undefined,peer => {{127,0,0,1},49459},pid => <0.137.0>,port => 8080,qs => <<"room=room1&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},<<"default">>],[]},{chat_handler,init,2,[{file,"src/chat_handler.erl"},{line,13}]},{cowboy_handler,execute,2,[{file,"src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{cowboy_req,qs_val,[<<"room">>,#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"oCw0TFlWfKXfpK4qM8Oz4w==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,host_info => undefined,method => <<"GET">>,path => <<"/ws">>,path_info => undefined,peer => {{127,0,0,1},49459},pid => <0.137.0>,port => 8080,qs => <<"room=room1&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},<<"default">>],[]},{chat_handler,init,2,[{file,"src/chat_handler.erl"},{line,13}]},{cowboy_handler,execute,2,[{file,"src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.137.0>,<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.137.0>]
    dictionary: [{rand_seed,{#{max => 288230376151711743,next => #Fun<rand.8.41921595>,type => exsplus,uniform => #Fun<rand.9.41921595>,uniform_n => #Fun<rand.10.41921595>},[220397089424887282|99126928754844224]}}]
    trap_exit: false
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 303
  neighbours:
2018-10-21 14:39:43 =ERROR REPORT====
Ranch listener http, connection process <0.137.0>, stream 1 had its request process <0.138.0> exit with reason undef and stacktrace [{cowboy_req,qs_val,[<<"room">>,#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"oCw0TFlWfKXfpK4qM8Oz4w==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,host_info => undefined,method => <<"GET">>,path => <<"/ws">>,path_info => undefined,peer => {{127,0,0,1},49459},pid => <0.137.0>,port => 8080,qs => <<"room=room1&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},<<"default">>],[]},{chat_handler,init,2,[{file,"src/chat_handler.erl"},{line,13}]},{cowboy_handler,execute,2,[{file,"src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-10-21 15:05:31 =SUPERVISOR REPORT====
     Supervisor: {local,chatroom_sup}
     Context:    child_terminated
     Reason:     killed
     Offender:   [{pid,<0.142.0>},{id,room_6652},{mfargs,{chat_room,start_link,undefined}},{restart_type,temporary},{shutdown,5000},{child_type,worker}]

2018-10-21 15:52:06 =ERROR REPORT====
** Generic server chat_manager terminating 
** Last message in was {join_room,<<>>,<<"alex">>,<0.140.0>}
** When Server state == {state,53277,57374}
** Reason for termination == 
** {bad_return_value,{reply,{error,user_connected}}}
2018-10-21 15:52:06 =CRASH REPORT====
  crasher:
    initial call: chat_manager:init/1
    pid: <0.123.0>
    registered_name: chat_manager
    exception exit: {{bad_return_value,{reply,{error,user_connected}}},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chat_sup,<0.118.0>]
    messages: []
    links: [<0.119.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 233
    stack_size: 27
    reductions: 156
  neighbours:
2018-10-21 15:52:06 =SUPERVISOR REPORT====
     Supervisor: {local,chat_sup}
     Context:    child_terminated
     Reason:     {bad_return_value,{reply,{error,user_connected}}}
     Offender:   [{pid,<0.123.0>},{id,chat_manager},{mfargs,{chat_manager,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]

2018-10-21 15:52:06 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.140.0>
    registered_name: []
    exception exit: {{{bad_return_value,{reply,{error,user_connected}}},{gen_server,call,[chat_manager,{join_room,<<>>,<<"alex">>,<0.140.0>}]}},[{gen_server,call,2,[{file,"gen_server.erl"},{line,204}]},{chat_handler,websocket_init,1,[{file,"src/chat_handler.erl"},{line,37}]},{cowboy_websocket,handler_call,6,[{file,"src/cowboy_websocket.erl"},{line,465}]},{cowboy_http,loop,2,[{file,"src/cowboy_http.erl"},{line,218}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3775>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 2009
  neighbours:
2018-10-21 15:52:06 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.140.0> exit with reason: {{bad_return_value,{reply,{error,user_connected}}},{gen_server,call,[chat_manager,{join_room,<<>>,<<"alex">>,<0.140.0>}]}}
2018-10-21 16:20:20 =ERROR REPORT====
** Generic server chat_manager terminating 
** Last message in was {'$gen_cast',{leave_room,default,<<"alex">>,<0.137.0>}}
** When Server state == {state,53277,57374}
** Reason for termination == 
** {badarg,[{ets,delete,[<<"alex">>,53277],[]},{chat_manager,handle_cast,2,[{file,"src/chat_manager.erl"},{line,74}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-21 16:20:20 =CRASH REPORT====
  crasher:
    initial call: chat_manager:init/1
    pid: <0.123.0>
    registered_name: chat_manager
    exception exit: {{badarg,[{ets,delete,[<<"alex">>,53277],[]},{chat_manager,handle_cast,2,[{file,"src/chat_manager.erl"},{line,74}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chat_sup,<0.118.0>]
    messages: []
    links: [<0.119.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 376
    stack_size: 27
    reductions: 189
  neighbours:
2018-10-21 16:20:20 =SUPERVISOR REPORT====
     Supervisor: {local,chat_sup}
     Context:    child_terminated
     Reason:     {badarg,[{ets,delete,[<<"alex">>,53277],[]},{chat_manager,handle_cast,2,[{file,"src/chat_manager.erl"},{line,74}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.123.0>},{id,chat_manager},{mfargs,{chat_manager,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]

2018-10-21 16:20:58 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.142.0>
    registered_name: []
    exception error: {function_clause,[{chat_handler,terminate,[remote,#{host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49834},port => 8080,qs => <<"room=&name=alex">>,scheme => <<"http">>,version => 'HTTP/1.1'},{state,<<>>,<<"alex">>}],[{file,"src/chat_handler.erl"},{line,73}]},{cowboy_websocket,terminate,3,[{file,"src/cowboy_websocket.erl"},{line,596}]},{cowboy_http,loop,2,[{file,"src/cowboy_http.erl"},{line,218}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3776>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 2091
  neighbours:
2018-10-21 16:20:58 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.142.0> exit with reason: function_clause
2018-10-21 16:21:02 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.150.0>
    registered_name: []
    exception error: {function_clause,[{chat_handler,terminate,[remote,#{host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49838},port => 8080,qs => <<"room=&name=alex">>,scheme => <<"http">>,version => 'HTTP/1.1'},{state,<<>>,<<"alex">>}],[{file,"src/chat_handler.erl"},{line,73}]},{cowboy_websocket,terminate,3,[{file,"src/cowboy_websocket.erl"},{line,596}]},{cowboy_http,loop,2,[{file,"src/cowboy_http.erl"},{line,218}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3780>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 2091
  neighbours:
2018-10-21 16:21:02 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.150.0> exit with reason: function_clause
2018-10-21 16:21:05 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.152.0>
    registered_name: []
    exception error: {function_clause,[{chat_handler,terminate,[remote,#{host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49839},port => 8080,qs => <<"room=&name=alex">>,scheme => <<"http">>,version => 'HTTP/1.1'},{state,<<>>,<<"alex">>}],[{file,"src/chat_handler.erl"},{line,73}]},{cowboy_websocket,terminate,3,[{file,"src/cowboy_websocket.erl"},{line,596}]},{cowboy_http,loop,2,[{file,"src/cowboy_http.erl"},{line,218}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3781>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 2091
  neighbours:
2018-10-21 16:21:05 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.152.0> exit with reason: function_clause
2018-10-21 16:23:15 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.144.0>
    registered_name: []
    exception error: {function_clause,[{chat_handler,terminate,[{remote,1001,<<>>},#{host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49835},port => 8080,qs => <<"room=&name=alex">>,scheme => <<"http">>,version => 'HTTP/1.1'},{state,<<>>,<<"alex">>}],[{file,"src/chat_handler.erl"},{line,73}]},{cowboy_websocket,terminate,3,[{file,"src/cowboy_websocket.erl"},{line,596}]},{cowboy_http,loop,2,[{file,"src/cowboy_http.erl"},{line,218}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3777>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 2100
  neighbours:
2018-10-21 16:23:15 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.144.0> exit with reason: function_clause
2018-10-21 16:23:15 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.146.0>
    registered_name: []
    exception error: {function_clause,[{chat_handler,terminate,[{remote,1001,<<>>},#{host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49836},port => 8080,qs => <<"room=&name=alex">>,scheme => <<"http">>,version => 'HTTP/1.1'},{state,<<>>,<<"alex">>}],[{file,"src/chat_handler.erl"},{line,73}]},{cowboy_websocket,terminate,3,[{file,"src/cowboy_websocket.erl"},{line,596}]},{cowboy_http,loop,2,[{file,"src/cowboy_http.erl"},{line,218}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3778>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 2100
  neighbours:
2018-10-21 16:23:15 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.148.0>
    registered_name: []
    exception error: {function_clause,[{chat_handler,terminate,[{remote,1001,<<>>},#{host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49837},port => 8080,qs => <<"room=&name=alex">>,scheme => <<"http">>,version => 'HTTP/1.1'},{state,<<>>,<<"alex">>}],[{file,"src/chat_handler.erl"},{line,73}]},{cowboy_websocket,terminate,3,[{file,"src/cowboy_websocket.erl"},{line,596}]},{cowboy_http,loop,2,[{file,"src/cowboy_http.erl"},{line,218}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3779>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 2100
  neighbours:
2018-10-21 16:23:15 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.146.0> exit with reason: function_clause
2018-10-21 16:23:15 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.148.0> exit with reason: function_clause
2018-10-21 16:24:24 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.181.0>
    registered_name: []
    exception error: {function_clause,[{chat_handler,terminate,[remote,#{host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49855},port => 8080,qs => <<"room=&name=alex">>,scheme => <<"http">>,version => 'HTTP/1.1'},{state,<<>>,<<"alex">>}],[{file,"src/chat_handler.erl"},{line,73}]},{cowboy_websocket,terminate,3,[{file,"src/cowboy_websocket.erl"},{line,596}]},{proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,257}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3815>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 376
    stack_size: 27
    reductions: 2313
  neighbours:
2018-10-21 16:24:24 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.181.0> exit with reason: function_clause
2018-10-21 16:26:03 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.140.0>
    registered_name: []
    exception exit: {{undef,[{chat_handler,init,[#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"DCqQZl+lJkvoS9Nlg2uNAQ==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,host_info => undefined,method => <<"GET">>,path => <<"/ws">>,path_info => undefined,peer => {{127,0,0,1},49858},pid => <0.139.0>,port => 8080,qs => <<"room=&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},[]],[]},{cowboy_handler,execute,2,[{file,"src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{chat_handler,init,[#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"DCqQZl+lJkvoS9Nlg2uNAQ==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,host_info => undefined,method => <<"GET">>,path => <<"/ws">>,path_info => undefined,peer => {{127,0,0,1},49858},pid => <0.139.0>,port => 8080,qs => <<"room=&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},[]],[]},{cowboy_handler,execute,2,[{file,"src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.139.0>,<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.139.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 243
  neighbours:
2018-10-21 16:26:03 =ERROR REPORT====
Ranch listener http, connection process <0.139.0>, stream 1 had its request process <0.140.0> exit with reason undef and stacktrace [{chat_handler,init,[#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"accept-language">> => <<"ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3">>,<<"cache-control">> => <<"no-cache">>,<<"connection">> => <<"keep-alive, Upgrade">>,<<"dnt">> => <<"1">>,<<"host">> => <<"localhost:8080">>,<<"origin">> => <<"http://localhost:8080">>,<<"pragma">> => <<"no-cache">>,<<"sec-websocket-extensions">> => <<"permessage-deflate">>,<<"sec-websocket-key">> => <<"DCqQZl+lJkvoS9Nlg2uNAQ==">>,<<"sec-websocket-version">> => <<"13">>,<<"upgrade">> => <<"websocket">>,<<"user-agent">> => <<"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:62.0) Gecko/20100101 Firefox/62.0">>},host => <<"localhost">>,host_info => undefined,method => <<"GET">>,path => <<"/ws">>,path_info => undefined,peer => {{127,0,0,1},49858},pid => <0.139.0>,port => 8080,qs => <<"room=&name=alex">>,ref => http,scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'},[]],[]},{cowboy_handler,execute,2,[{file,"src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"src/cowboy_stream_h.erl"},{line,293}]},{cowboy_stream_h,request_process,3,[{file,"src/cowboy_stream_h.erl"},{line,271}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-10-21 16:27:24 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.150.0>
    registered_name: []
    exception error: {function_clause,[{chat_handler,terminate,[remote,#{host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49866},port => 8080,qs => <<"room=&name=alex">>,scheme => <<"http">>,version => 'HTTP/1.1'},{state,<<>>,<<"alex">>}],[{file,"src/chat_handler.erl"},{line,73}]},{cowboy_websocket,terminate,3,[{file,"src/cowboy_websocket.erl"},{line,596}]},{cowboy_http,loop,2,[{file,"src/cowboy_http.erl"},{line,218}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3780>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 2091
  neighbours:
2018-10-21 16:27:24 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.150.0> exit with reason: function_clause
2018-10-21 16:29:25 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.144.0>
    registered_name: []
    exception error: {function_clause,[{chat_handler,terminate,[stop,#{host => <<"localhost">>,method => <<"GET">>,path => <<"/ws">>,peer => {{127,0,0,1},49874},port => 8080,qs => <<"room=&name=alex">>,scheme => <<"http">>,version => 'HTTP/1.1'},{state,<<>>,<<"alex">>}],[{file,"src/chat_handler.erl"},{line,73}]},{cowboy_websocket,terminate,3,[{file,"src/cowboy_websocket.erl"},{line,596}]},{cowboy_http,loop,2,[{file,"src/cowboy_http.erl"},{line,218}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3777>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 2009
  neighbours:
2018-10-21 16:29:25 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.144.0> exit with reason: function_clause
2018-10-21 16:30:45 =ERROR REPORT====
** Generic server chat_manager terminating 
** Last message in was {'$gen_cast',{leave_room,<<>>,<<"alex">>,<0.142.0>}}
** When Server state == {state,53277,57374}
** Reason for termination == 
** {function_clause,[{gen_server,cast,[<<>>,{leave,<<"alex">>,<0.142.0>}],[{file,"gen_server.erl"},{line,218}]},{chat_manager,handle_cast,2,[{file,"src/chat_manager.erl"},{line,75}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2018-10-21 16:30:45 =CRASH REPORT====
  crasher:
    initial call: chat_manager:init/1
    pid: <0.123.0>
    registered_name: chat_manager
    exception exit: {{function_clause,[{gen_server,cast,[<<>>,{leave,<<"alex">>,<0.142.0>}],[{file,"gen_server.erl"},{line,218}]},{chat_manager,handle_cast,2,[{file,"src/chat_manager.erl"},{line,75}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{gen_server,terminate,7,[{file,"gen_server.erl"},{line,812}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [chat_sup,<0.118.0>]
    messages: []
    links: [<0.119.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 243
  neighbours:
2018-10-21 16:30:45 =SUPERVISOR REPORT====
     Supervisor: {local,chat_sup}
     Context:    child_terminated
     Reason:     {function_clause,[{gen_server,cast,[<<>>,{leave,<<"alex">>,<0.142.0>}],[{file,"gen_server.erl"},{line,218}]},{chat_manager,handle_cast,2,[{file,"src/chat_manager.erl"},{line,75}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
     Offender:   [{pid,<0.123.0>},{id,chat_manager},{mfargs,{chat_manager,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]

2018-10-21 16:35:46 =CRASH REPORT====
  crasher:
    initial call: cowboy_clear:connection_process/5
    pid: <0.140.0>
    registered_name: []
    exception error: {{try_clause,{reply,<<"user already connected!">>}},[{cowboy_websocket,handler_call,6,[{file,"src/cowboy_websocket.erl"},{line,464}]},{cowboy_http,loop,2,[{file,"src/cowboy_http.erl"},{line,218}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.125.0>,<0.124.0>,ranch_sup,<0.108.0>]
    messages: []
    links: [<0.125.0>,#Port<0.3775>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 1971
  neighbours:
2018-10-21 16:35:46 =ERROR REPORT====
Ranch listener http had connection process started with cowboy_clear:start_link/4 at <0.140.0> exit with reason: {try_clause,{reply,<<"user already connected!">>}}
